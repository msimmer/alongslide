(function(){var t;t=function(){function t(){}return t.prototype.init=function(){return document.namedFlows=new this.NamedFlowMap},t}(),t.prototype.NamedFlowMap=function(){function e(){}return e.prototype.namedFlows={},e.prototype.build=function(e){return this.namedFlows[e]=new t.prototype.NamedFlow(e)},e.prototype.get=function(t){return this.namedFlows[t]||this.build(t)},e.prototype.has=function(t){return null!=this.namedFlows[t]},e.prototype.set=function(t,e){return this.namedFlows[t]=e},e.prototype["delete"]=function(t){return delete this.namedFlows[t]},e}(),t.prototype.NamedFlow=function(){function e(t){this.name=t,this.contentNodes=[],this.overset=!1,this.resetRegions()}return e.prototype.resetRegions=function(){return this.regions=[],this.firstEmptyRegionIndex=-1,this.updateOverset()},e.prototype.getRegions=function(){return this.regions},e.prototype.addRegion=function(e){return this.regions.push(new t.prototype.Region(e)),this.firstEmptyRegionIndex=this.regions.length-1,this.doFlow()},e.prototype.getContent=function(){return this.contentNodes},e.prototype.addContent=function(t){return this.contentNodes.push($(t)),this.doFlow()},e.prototype.reFlow=function(){var t,e,o,n,r;for(n=_.pluck(this.regions,"node"),e=0,o=n.length;o>e;e++)t=n[e],t.empty();for(this.firstEmptyRegionIndex=0,r=[];;){if(this.doFlow(),this.firstEmptyRegionIndex===this.regions.length-1)break;r.push(this.firstEmptyRegionIndex++)}return r},e.prototype.doFlow=function(){var t;return 0===this.firstEmptyRegionIndex?this.populateRegions():this.firstEmptyRegionIndex>0&&(t=$(this.oversetRegion().node).contents().remove(),this.lastRegion().appendNode(t),this.breakUp({nodes:t})),this.updateOverset()},e.prototype.populateRegions=function(){var t,e,o,n,r;for(n=this.contentNodes,r=[],e=0,o=n.length;o>e;e++)t=n[e],r.push(this.lastRegion().appendNode(t.clone()));return r},e.prototype.breakUp=function(t){var e,o,n=this;return null==t&&(t={}),e=t.nodes||$(t.node).contents(),o=t.into||this.oversetRegion().node,null!=t.node&&(o=$(t.node).clone().empty().appendTo(o).get(0)),e.each(function(t,e){var r;return r=$(e).parent(),$(e).remove().appendTo(o),"overset"===n.oversetRegion().updateOverset()?($(e).remove().prependTo(r),e.nodeType===Node.TEXT_NODE?n.breakUpText({node:e,into:o}):n.breakUp({node:e,into:o}),!1):void 0})},e.prototype.breakUpText=function(t){var e,o,n,r,i,s,a,l;for(null==t&&(t={}),n=t.node,o=document.createTextNode(""),$(o).appendTo(t.into),i=n.nodeValue.split(/[ ]+/),e=i.length-1;;){if(o.textContent=i.slice(0,+e+1||9e9).join(" "),"overset"!==this.oversetRegion().updateOverset()){for(r=s=a=e+1,l=i.length-1;l>=a?l>=s:s>=l;r=l>=a?++s:--s)if(o.textContent+=" "+i[r],"overset"===this.oversetRegion().updateOverset()){e=r-1;break}break}if(0===e){e=-1;break}e=Math.floor(e/2)}return-1===e?$(o).remove():(o.textContent=i.slice(0,+e+1||9e9).join(" "),n.nodeValue=i.slice(e+1,+(i.length-1)+1||9e9).join(" "),$(n).parent().addClass("region-flow-post-text-break")),this.oversetRegion().updateOverset()},e.prototype.updateOverset=function(){var t;return this.overset="overset"===(null!=(t=this.regions[this.firstEmptyRegionIndex])?t.updateOverset():void 0)},e.prototype.oversetRegion=function(){return this.regions[this.firstEmptyRegionIndex-1]},e.prototype.lastRegion=function(){return this.regions[this.firstEmptyRegionIndex]},e}(),t.prototype.Region=function(){function t(t){this.node=$(t),this.updateOverset()}return t.prototype.appendNode=function(t){return $(this.node).append(t),this.updateOverset()},t.prototype.updateOverset=function(){var t,e;return e=this.node.get(0),t=e.scrollHeight>e.clientHeight,this.regionOverset=this.node.is(":empty")?"empty":t?"overset":"fit"},t}(),window.RegionFlow=t}).call(this),function(t,e,o){"use strict";function n(o){if(r=e.documentElement,i=e.body,K(),fe=this,o=o||{},o.emitEvents!==!0||y||(v=o.emitEvents,T[b]=e.createEvent("Event"),T[b].initEvent(b,!0,!0),T[P]=e.createEvent("Event"),T[P].initEvent(P,!0,!0),T[S]=e.createEvent("Event"),T[S].initEvent(S,!0,!0)),we=o.constants||{},o.easing)for(var n in o.easing)J[n]=o.easing[n];Se=o.edgeStrategy||"set",me={beforerender:o.beforerender,render:o.render},ge=o.forceHeight!==!1,ge&&(We=o.scale||1),ve=o.mobileDeceleration||L,Te=o.smoothScrolling!==!1,Ee=o.smoothScrollingDuration||C,be={targetTop:fe.getScrollPosition()},Xe=(o.mobileCheck||function(){return/Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(navigator.userAgent||navigator.vendor||t.opera)})(),Xe?(he=e.getElementById("skrollr-body"),he&&pe(),te(),Ae(r,[k,_],[F])):Ae(r,[k,O],[F]),qe=o.horizontal===!0,fe.refresh(),Oe(t,"resize orientationchange",function(){var t=r.clientWidth,e=r.clientHeight;(e!==je||t!==Ye)&&(je=e,Ye=t,ze=!0)});var s=Z();return function a(){ne(),Fe=s(a)}(),fe}var r,i,s=t.skrollr={get:function(){return fe},init:function(t){return fe||new n(t)},VERSION:"0.6.13"},a=Object.prototype.hasOwnProperty,l=t.Math,u=t.getComputedStyle,c="touchstart",p="touchmove",f="touchcancel",d="touchend",h="skrollable",m=h+"-before",g=h+"-between",w=h+"-after",v=!1,y=!e.createEvent,T={},E="skrollr",b=E+"Before",P=E+"Between",S=E+"After",k="skrollr",F="no-"+k,O=k+"-desktop",_=k+"-mobile",I="linear",x=1e3,L=.004,C=200,A="start",N="end",R="center",H="bottom",M="___skrollable_id",$=/^\s+|\s+$/g,D=/^data(?:-(_\w+))?(?:-?(-?\d*\.?\d+p?))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,W=/\s*([\w\-\[\]]+)\s*:\s*(.+?)\s*(?:;|$)/gi,V=/^([a-z\-]+)\[(\w+)\]$/,B=/-([a-z])/g,U=function(t,e){return e.toUpperCase()},Y=/[\-+]?[\d]*\.?[\d]+/g,j=/\{\?\}/g,z=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,G=/[a-z\-]+-gradient/g,X="",q="",K=function(){var t=/^(?:O|Moz|webkit|ms)|(?:-(?:o|moz|webkit|ms)-)/;if(u){var e=u(i,null);for(var o in e)if(X=o.match(t)||+o==o&&e[o].match(t))break;if(!X)return X=q="",void 0;X=X[0],"-"===X.slice(0,1)?(q=X,X={"-webkit-":"webkit","-moz-":"Moz","-ms-":"ms","-o-":"O"}[X]):q="-"+X.toLowerCase()+"-"}},Z=function(){var e=t.requestAnimationFrame||t[X.toLowerCase()+"RequestAnimationFrame"],o=Me();return(Xe||!e)&&(e=function(e){var n=Me()-o,r=l.max(0,1e3/60-n);return t.setTimeout(function(){o=Me(),e()},r)}),e},Q=function(){var e=t.cancelAnimationFrame||t[X.toLowerCase()+"CancelAnimationFrame"];return(Xe||!e)&&(e=function(e){return t.clearTimeout(e)}),e},J={begin:function(){return 0},end:function(){return 1},linear:function(t){return t},quadratic:function(t){return t*t},cubic:function(t){return t*t*t},swing:function(t){return-l.cos(t*l.PI)/2+.5},sqrt:function(t){return l.sqrt(t)},outCubic:function(t){return l.pow(t-1,3)+1},bounce:function(t){var e;if(.5083>=t)e=3;else if(.8489>=t)e=9;else if(.96208>=t)e=27;else{if(!(.99981>=t))return 1;e=91}return 1-l.abs(3*l.cos(1.028*t*e)/e)}};n.prototype.isMobile=function(){return Xe},n.prototype.refresh=function(t){var n,r,i=!1;for(t===o?(i=!0,de=[],Ge=0,t=e.getElementsByTagName("*")):t=[].concat(t),n=0,r=t.length;r>n;n++){var s=t[n],a=s,l=[],u=Te,c=Se;if(s.attributes){for(var p=0,f=s.attributes.length;f>p;p++){var d=s.attributes[p];if("data-anchor-target"!==d.name)if("data-smooth-scrolling"!==d.name)if("data-edge-strategy"!==d.name){var m=d.name.match(D);if(null!==m){var g={props:d.value,element:s};l.push(g);var w=m[1];w=w&&we[w.substr(1)]||0;var v=m[2];/p$/.test(v)?(g.isPercentage=!0,g.offset=((0|v.slice(0,-1))+w)/100):g.offset=(0|v)+w;var y=m[3],T=m[4]||y;y&&y!==A&&y!==N?(g.mode="relative",g.anchors=[y,T]):(g.mode="absolute",y===N?g.isEnd=!0:g.isPercentage||(g.frame=g.offset*We,delete g.offset))}}else c=d.value;else u="off"!==d.value;else if(a=e.querySelector(d.value),null===a)throw'Unable to find anchor target "'+d.value+'"'}if(l.length){var E,b,P;!i&&M in s?(P=s[M],E=de[P].styleAttr,b=de[P].classAttr):(P=s[M]=Ge++,E=s.style.cssText,b=Ce(s)),de[P]={element:s,styleAttr:E,classAttr:b,anchorTarget:a,keyFrames:l,smoothScrolling:u,edgeStrategy:c},Ae(s,[h],[])}}}for(xe(),n=0,r=t.length;r>n;n++){var S=de[t[n][M]];S!==o&&(re(S),se(S))}return fe},n.prototype.relativeToAbsolute=function(t,e,o){var n=r.clientHeight,i=t.getBoundingClientRect(),s=i.top,a=i.bottom-i.top;return e===H?s-=n:e===R&&(s-=n/2),o===H?s+=a:o===R&&(s+=a/2),s+=fe.getScrollPosition(),0|s+.5},n.prototype.animateTo=function(t,e){e=e||{};var n=Me(),r=fe.getScrollPosition();return ye={startTop:r,topDiff:t-r,targetTop:t,duration:e.duration||x,startTime:n,endTime:n+(e.duration||x),easing:J[e.easing||I],done:e.done},ye.topDiff||(ye.done&&ye.done.call(fe,!1),ye=o),fe},n.prototype.stopAnimateTo=function(){ye&&ye.done&&ye.done.call(fe,!0),ye=o},n.prototype.isAnimatingTo=function(){return!!ye},n.prototype.setScrollPosition=function(e,o){return o===!0&&(Be=e,Pe=!0),Xe?Ke=l.min(l.max(e,0),De):qe?t.scrollTo(e,0):t.scrollTo(0,e),fe},n.prototype.getScrollPosition=function(){return Xe?Ke:qe?t.pageXOffset||r.scrollLeft||i.scrollLeft||0:t.pageYOffset||r.scrollTop||i.scrollTop||0},n.prototype.on=function(t,e){return me[t]=e,fe},n.prototype.off=function(t){return delete me[t],fe},n.prototype.destroy=function(){var t=Q();t(Fe),Ie(),Ae(r,[F],[k,O,_]);for(var e=0,n=de.length;n>e;e++)ce(de[e].element);r.style.overflow=i.style.overflow="auto",r.style.height=i.style.height="auto",he&&s.setStyle(he,"transform","none"),fe=o,he=o,me=o,ge=o,De=0,We=1,we=o,ve=o,Ve="down",Be=-1,Ye=0,je=0,ze=!1,ye=o,Te=o,Ee=o,be=o,Pe=o,Ge=0,Se=o,Xe=!1,Ke=0,ke=o};var te=function(){var e,n,s,a,u,h,m,g,w,v,y,T,E;Oe(r,[c,p,f,d].join(" "),function(t){t.preventDefault();var r=t.changedTouches[0];switch(a=r.clientY,u=r.clientX,y=t.timeStamp,t.type){case c:e&&e.blur(),fe.stopAnimateTo(),e=t.target,n=h=a,s=m=u,v=y;break;case p:g=a-h,w=u-m,E=y-T;var i=Ke-(qe?w:g);fe.setScrollPosition(i,!0),h=a,m=u,T=y;break;default:case f:case d:var b=n-a,P=s-u,S=P*P+b*b;if(49>S)return e.focus(),e.click(),void 0;e=o;var k=(qe?w:g)/E;k=l.max(l.min(k,3),-3);var F=l.abs(k/ve),O=k*F+.5*ve*F*F,_=fe.getScrollPosition()-O,I=0;_>De?(I=(De-_)/O,_=De):0>_&&(I=-_/O,_=0),F*=1-I,fe.animateTo(_,{easing:"outCubic",duration:F})}}),t.scrollTo(0,0),r.style.overflow=i.style.overflow="hidden"},ee=function(){var t,e,o,n,i,s,a,u,c;for(u=0,c=de.length;c>u;u++)for(t=de[u],e=t.element,o=t.anchorTarget,n=t.keyFrames,i=0,s=n.length;s>i;i++){a=n[i];var p=a.offset;a.isPercentage&&(p*=qe?r.clientWidth:r.clientHeight,a.frame=p),"relative"===a.mode&&(ce(e),a.frame=fe.relativeToAbsolute(o,a.anchors[0],a.anchors[1])-p,ce(e,!0)),ge&&!a.isEnd&&a.frame>De&&(De=a.frame)}for(De=l.max(De,Le()),u=0,c=de.length;c>u;u++){for(t=de[u],n=t.keyFrames,i=0,s=n.length;s>i;i++)a=n[i],a.isEnd&&(a.frame=De-a.offset);t.keyFrames.sort($e)}},oe=function(t,e){for(var o=0,n=de.length;n>o;o++){var r,i,l=de[o],u=l.element,c=l.smoothScrolling?t:e,p=l.keyFrames,f=p[0].frame,d=p[p.length-1].frame,v=f>c,y=c>d,T=p[v?0:p.length-1];if(v||y){if(v&&-1===l.edge||y&&1===l.edge)continue;switch(Ae(u,[v?m:w],[m,g,w]),l.edge=v?-1:1,l.edgeStrategy){case"reset":ce(u);continue;case"ease":c=T.frame;break;default:case"set":var E=T.props;for(r in E)a.call(E,r)&&(i=ue(E[r].value),s.setStyle(u,r,i));continue}}else 0!==l.edge&&(Ae(u,[h,g],[m,w]),l.edge=0);for(var b=0,P=p.length-1;P>b;b++)if(c>=p[b].frame&&c<=p[b+1].frame){var S=p[b],k=p[b+1];for(r in S.props)if(a.call(S.props,r)){var F=(c-S.frame)/(k.frame-S.frame);F=S.props[r].easing(F),i=le(S.props[r].value,k.props[r].value,F),i=ue(i),s.setStyle(u,r,i)}break}}},ne=function(){ze&&(ze=!1,xe());var t,e,n=fe.getScrollPosition(),r=Me();if(ye)r>=ye.endTime?(n=ye.targetTop,t=ye.done,ye=o):(e=ye.easing((r-ye.startTime)/ye.duration),n=0|ye.startTop+e*ye.topDiff),fe.setScrollPosition(n,!0);else if(!Xe){var i=be.targetTop-n;i&&(be={startTop:Be,topDiff:n-Be,targetTop:n,startTime:Ue,endTime:Ue+Ee}),r<=be.endTime&&(e=J.sqrt((r-be.startTime)/Ee),n=0|be.startTop+e*be.topDiff)}if(Xe&&he){var a=[0,-Ke+"px"];qe&&a.reverse(),s.setStyle(he,"transform","translate("+a.join(", ")+") "+ke)}if(Pe||Be!==n){Ve=n>=Be?"forward":"back",Pe=!1;var l={curTop:n,lastTop:Be,maxTop:De,direction:Ve},u=me.beforerender&&me.beforerender.call(fe,l);u!==!1&&(oe(n,fe.getScrollPosition()),Be=n,me.render&&me.render.call(fe,l)),t&&t.call(fe,!1)}Ue=r},re=function(t){for(var e=0,o=t.keyFrames.length;o>e;e++){for(var n,r,i,s,a=t.keyFrames[e],l={};null!==(s=W.exec(a.props));)i=s[1],r=s[2],n=i.match(V),null!==n?(i=n[1],n=n[2]):n=I,r=r.indexOf("!")?ie(r):[r.slice(1)],l[i]={value:r,easing:J[n]};a.props=l}},ie=function(t){var e=[];return z.lastIndex=0,t=t.replace(z,function(t){return t.replace(Y,function(t){return 100*(t/255)+"%"})}),q&&(G.lastIndex=0,t=t.replace(G,function(t){return q+t})),t=t.replace(Y,function(t){return e.push(+t),"{?}"}),e.unshift(t),e},se=function(t){var e,o,n={};for(e=0,o=t.keyFrames.length;o>e;e++)ae(t.keyFrames[e],n);for(n={},e=t.keyFrames.length-1;e>=0;e--)ae(t.keyFrames[e],n)},ae=function(t,e){var o;for(o in e)a.call(t.props,o)||(t.props[o]=e[o]);for(o in t.props)e[o]=t.props[o]},le=function(t,e,o){var n,r=t.length;if(r!==e.length)throw"Can't interpolate between \""+t[0]+'" and "'+e[0]+'"';var i=[t[0]];for(n=1;r>n;n++)i[n]=t[n]+(e[n]-t[n])*o;return i},ue=function(t){var e=1;return j.lastIndex=0,t[0].replace(j,function(){return t[e++]})},ce=function(t,e){t=[].concat(t);for(var o,n,r=0,i=t.length;i>r;r++)n=t[r],o=de[n[M]],o&&(e?(n.style.cssText=o.dirtyStyleAttr,Ae(n,o.dirtyClassAttr)):(o.dirtyStyleAttr=n.style.cssText,o.dirtyClassAttr=Ce(n),n.style.cssText=o.styleAttr,Ae(n,o.classAttr)))},pe=function(){ke="translateZ(0)",s.setStyle(he,"transform",ke);var t=u(he),e=t.getPropertyValue("transform"),o=t.getPropertyValue(q+"transform"),n=e&&"none"!==e||o&&"none"!==o;n||(ke="")};s.setStyle=function(t,e,o){var n=t.style;if(e=e.replace(B,U).replace("-",""),"zIndex"===e)n[e]=""+(0|o);else if("float"===e)n.styleFloat=n.cssFloat=o;else try{X&&(n[X+e.slice(0,1).toUpperCase()+e.slice(1)]=o),n[e]=o}catch(r){}};var fe,de,he,me,ge,we,ve,ye,Te,Ee,be,Pe,Se,ke,Fe,Oe=s.addEvent=function(e,o,n){var r=function(e){return e=e||t.event,e.target||(e.target=e.srcElement),e.preventDefault||(e.preventDefault=function(){e.returnValue=!1}),n.call(this,e)};o=o.split(" ");for(var i,s=0,a=o.length;a>s;s++)i=o[s],e.addEventListener?e.addEventListener(i,n,!1):e.attachEvent("on"+i,r),Ze.push({element:e,name:i,listener:n})},_e=s.removeEvent=function(t,e,o){e=e.split(" ");for(var n=0,r=e.length;r>n;n++)t.removeEventListener?t.removeEventListener(e[n],o,!1):t.detachEvent("on"+e[n],o)},Ie=function(){for(var t,e=0,o=Ze.length;o>e;e++)t=Ze[e],_e(t.element,t.name,t.listener);Ze=[]},xe=function(){var t=fe.getScrollPosition();De=0;var e=qe?"width":"height";if(ge&&!Xe&&(i.style[e]="auto"),ee(),ge&&!Xe){var o=qe?r.clientWidth:r.clientHeight;i.style[e]=De+o+"px"}Xe?fe.setScrollPosition(l.min(fe.getScrollPosition(),De)):fe.setScrollPosition(t,!0),Pe=!0},Le=function(){if(qe){var t=he&&he.offsetWidth||0,e=l.max(t,i.scrollWidth,i.offsetWidth,r.scrollWidth,r.offsetWidth,r.clientWidth);return e-r.clientWidth}var o=he&&he.offsetHeight||0,n=l.max(o,i.scrollHeight,i.offsetHeight,r.scrollHeight,r.offsetHeight,r.clientHeight);return n-r.clientHeight},Ce=function(e){var o="className";return t.SVGElement&&e instanceof t.SVGElement&&(e=e[o],o="baseVal"),e[o]},Ae=function(e,n,r){if(v){for(var i=0,s=null;i<n.length;i++){switch(n[i]){case m:s=b;break;case g:s=P;break;case w:s=S}if(s)break}s&&Ne(e,s)}var a="className";if(t.SVGElement&&e instanceof t.SVGElement&&(e=e[a],a="baseVal"),r===o)return e[a]=n,void 0;for(var l=e[a],u=0,c=r.length;c>u;u++)l=He(l).replace(He(r[u])," ");l=Re(l);for(var p=0,f=n.length;f>p;p++)-1===He(l).indexOf(He(n[p]))&&(l+=" "+n[p]);e[a]=Re(l)},Ne=function(t,e){try{y?t.fireEvent("on"+e):t.dispatchEvent(T[e])}catch(o){}},Re=function(t){return t.replace($,"")},He=function(t){return" "+t+" "},Me=Date.now||function(){return+new Date},$e=function(t,e){return t.frame-e.frame},De=0,We=1,Ve="forward",Be=-1,Ue=Me(),Ye=0,je=0,ze=!1,Ge=0,Xe=!1,qe=!1,Ke=0,Ze=[]}(window,document),/*!
 PowerTip - v1.2.0 - 2013-10-15
 http://stevenbenner.github.io/jquery-powertip/
 Copyright (c) 2013 Steven Benner (http://stevenbenner.com/).
 Released under MIT license.
 https://raw.github.com/stevenbenner/jquery-powertip/master/LICENSE.txt
*/
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(){var e=this;e.top="auto",e.left="auto",e.right="auto",e.bottom="auto",e.set=function(o,n){t.isNumeric(n)&&(e[o]=Math.round(n))},e.isSet=function(o){return t.isNumeric(e[o])}}function o(t,e,o){function n(n,r){s(),t.data(T)?a():n?(r&&t.data(b,!0),o.showTip(t)):(L.tipOpenImminent=!0,u=setTimeout(function(){u=null,i()},e.intentPollInterval))}function r(n){s(),L.tipOpenImminent=!1,t.data(T)&&(t.data(b,!1),n?o.hideTip(t):(L.delayInProgress=!0,L.closeDelayTimeout=setTimeout(function(){L.closeDelayTimeout=null,o.hideTip(t),L.delayInProgress=!1,c=null},e.closeDelay),c=L.closeDelayTimeout))}function i(){var r=Math.abs(L.previousX-L.currentX),i=Math.abs(L.previousY-L.currentY),s=r+i;s<e.intentSensitivity?(a(),o.showTip(t)):(L.previousX=L.currentX,L.previousY=L.currentY,n())}function s(t){u=clearTimeout(u),(L.closeDelayTimeout&&c===L.closeDelayTimeout||t)&&a()}function a(){L.closeDelayTimeout=clearTimeout(L.closeDelayTimeout),L.delayInProgress=!1}function l(){o.resetPosition(t)}var u=null,c=null;this.show=n,this.hide=r,this.cancel=s,this.resetPosition=l}function n(){function t(t,o,s,a,l){var u,c=o.split("-")[0],p=l.offset,f=l.fromCenter,d=l.inset,h=new e;switch(u=i(t)?r(t,c,f):n(t,c,f),o){case"n":h.set("left",u.left-s/2),h.set("bottom",L.windowHeight-u.top+p);break;case"e":h.set("left",u.left+p),h.set("top",u.top-a/2);break;case"s":h.set("left",u.left-s/2),h.set("top",u.top+p);break;case"w":h.set("top",u.top-a/2),h.set("right",L.windowWidth-u.left+p);break;case"nw":h.set("bottom",L.windowHeight-u.top+p),h.set("right",L.windowWidth-u.left-d);break;case"nw-alt":h.set("left",u.left),h.set("bottom",L.windowHeight-u.top+p);break;case"ne":h.set("left",u.left-d),h.set("bottom",L.windowHeight-u.top+p);break;case"ne-alt":h.set("bottom",L.windowHeight-u.top+p),h.set("right",L.windowWidth-u.left);break;case"sw":h.set("top",u.top+p),h.set("right",L.windowWidth-u.left-d);break;case"sw-alt":h.set("left",u.left),h.set("top",u.top+p);break;case"se":h.set("left",u.left-d),h.set("top",u.top+p);break;case"se-alt":h.set("top",u.top+p),h.set("right",L.windowWidth-u.left)}return h}function o(t,e,o){return Math.round(e*o+t*(1-o))}function n(t,e,n){var r,i,s=t.offset(),a=t.outerWidth(),l=t.outerHeight(),u={top:s.top+l/2,left:s.left+a/2};switch(e){case"n":r=s.left+a/2,i=s.top;break;case"e":r=s.left+a,i=s.top+l/2;break;case"s":r=s.left+a/2,i=s.top+l;break;case"w":r=s.left,i=s.top+l/2;break;case"nw":r=s.left,i=s.top;break;case"ne":r=s.left+a,i=s.top;break;case"sw":r=s.left,i=s.top+l;break;case"se":r=s.left+a,i=s.top+l}return{top:o(u.top,i,n),left:o(u.left,r,n)}}function r(t,e,n){function r(){g.push(p.matrixTransform(d))}var i,s,a,l,u=t.closest("svg")[0],c=t[0],p=u.createSVGPoint(),f=c.getBBox(),d=c.getScreenCTM(),h=f.width/2,m=f.height/2,g=[],w=["nw","n","ne","e","se","s","sw","w"],v=u.createSVGPoint();if(p.x=f.x,p.y=f.y,v.x=p.x+h,v.y=p.y+m,v=v.matrixTransform(d),r(),p.x+=h,r(),p.x+=h,r(),p.y+=m,r(),p.y+=m,r(),p.x-=h,r(),p.x-=h,r(),p.y-=m,r(),g[0].y!==g[1].y||g[0].x!==g[7].x)for(s=Math.atan2(d.b,d.a)*x,a=Math.ceil((s%360-22.5)/45),v=v.matrixTransform(d),1>a&&(a+=8);a--;)w.push(w.shift());for(l=0;l<g.length;l++)if(w[l]===e){i=g[l];break}return{top:o(v.y,i.y,n)+L.scrollTop,left:o(v.x,i.x,n)+L.scrollLeft}}this.compute=t}function r(o){function r(t){t.data(T,!0),k.queue(function(e){i(t),e()})}function i(e){var n;if(e.data(T)){if(L.isTipOpen)return L.isClosing||s(L.activeHover),k.delay(100).queue(function(t){i(e),t()}),void 0;e.trigger("powerTipPreRender"),n=d(e),n&&(k.empty().append(n),e.trigger("powerTipRender"),L.activeHover=e,L.isTipOpen=!0,k.data(S,o.mouseOnToPopup),o.followMouse?a():(l(e),L.isFixedTipOpen=!0),g.on("click"+I,function(n){var r=n.target;r!==e[0]&&(o.mouseOnToPopup?r===k[0]||t.contains(k[0],r)||t.powerTip.hide():t.powerTip.hide())}),k.fadeIn(o.fadeInTime,function(){L.desyncTimeout||(L.desyncTimeout=setInterval(c,500)),e.trigger("powerTipOpen")}))}}function s(t){L.isClosing=!0,L.isTipOpen=!1,L.desyncTimeout=clearInterval(L.desyncTimeout),t.data(T,!1),t.data(b,!1),g.off("click"+I),k.fadeOut(o.fadeOutTime,function(){var n=new e;L.activeHover=null,L.isClosing=!1,L.isFixedTipOpen=!1,k.removeClass(),n.set("top",L.currentY+o.offset),n.set("left",L.currentX+o.offset),k.css(n),t.trigger("powerTipClose")})}function a(){if(!L.isFixedTipOpen&&(L.isTipOpen||L.tipOpenImminent&&k.data(P))){var t,n,r=k.outerWidth(),i=k.outerHeight(),s=new e;s.set("top",L.currentY+o.offset),s.set("left",L.currentX+o.offset),t=h(s,r,i),t!==C.none&&(n=m(t),1===n?t===C.right?s.set("left",L.windowWidth-r):t===C.bottom&&s.set("top",L.scrollTop+L.windowHeight-i):(s.set("left",L.currentX-r-o.offset),s.set("top",L.currentY-i-o.offset))),k.css(s)}}function l(e){var n,r;o.smartPlacement?(n=t.fn.powerTip.smartPlacementLists[o.placement],t.each(n,function(t,o){var n=h(u(e,o),k.outerWidth(),k.outerHeight());return r=o,n===C.none?!1:void 0})):(u(e,o.placement),r=o.placement),k.addClass(r)}function u(t,n){var r,i,s=0,a=new e;a.set("top",0),a.set("left",0),k.css(a);do r=k.outerWidth(),i=k.outerHeight(),a=p.compute(t,n,r,i,o),k.css(a);while(++s<=5&&(r!==k.outerWidth()||i!==k.outerHeight()));return a}function c(){var e=!1;L.isTipOpen&&!L.isClosing&&!L.delayInProgress&&(t.inArray("mouseleave",o.closeEvents)>-1||t.inArray("mouseout",o.closeEvents)>-1||t.inArray("blur",o.closeEvents)>-1||t.inArray("focusout",o.closeEvents)>-1)&&(L.activeHover.data(T)===!1||L.activeHover.is(":disabled")?e=!0:f(L.activeHover)||L.activeHover.is(":focus")||L.activeHover.data(b)||(k.data(S)?f(k)||(e=!0):e=!0),e&&s(L.activeHover))}var p=new n,k=t("#"+o.popupId);0===k.length&&(k=t("<div/>",{id:o.popupId}),0===v.length&&(v=t("body")),v.append(k),L.tooltips=L.tooltips?L.tooltips.add(k):k),o.followMouse&&(k.data(P)||(g.on("mousemove"+I,a),w.on("scroll"+I,a),k.data(P,!0))),o.mouseOnToPopup&&!o.manual&&(k.data(E)||(k.on({mouseenter:function(){k.data(S)&&L.activeHover&&L.activeHover.data(y).cancel()},mouseleave:function(){L.activeHover&&L.activeHover.data(y).hide()}}),k.data(E,!0))),this.showTip=r,this.hideTip=s,this.resetPosition=l}function i(t){return!!window.SVGElement&&t[0]instanceof SVGElement}function s(t){return!!t&&"number"==typeof t.pageX}function a(){L.mouseTrackingActive||(L.mouseTrackingActive=!0,l(),t(l),g.on("mousemove"+I,p),w.on("resize"+I,u),w.on("scroll"+I,c))}function l(){L.scrollLeft=w.scrollLeft(),L.scrollTop=w.scrollTop(),L.windowWidth=w.width(),L.windowHeight=w.height()}function u(){L.windowWidth=w.width(),L.windowHeight=w.height()}function c(){var t=w.scrollLeft(),e=w.scrollTop();t!==L.scrollLeft&&(L.currentX+=t-L.scrollLeft,L.scrollLeft=t),e!==L.scrollTop&&(L.currentY+=e-L.scrollTop,L.scrollTop=e)}function p(t){L.currentX=t.pageX,L.currentY=t.pageY}function f(t){var e=t.offset(),o=t[0].getBoundingClientRect(),n=o.right-o.left,r=o.bottom-o.top;return L.currentX>=e.left&&L.currentX<=e.left+n&&L.currentY>=e.top&&L.currentY<=e.top+r}function d(e){var o,n,r=e.data(F),i=e.data(O),s=e.data(_);return r?(t.isFunction(r)&&(r=r.call(e[0])),n=r):i?(t.isFunction(i)&&(i=i.call(e[0])),i.length>0&&(n=i.clone(!0,!0))):s&&(o=t("#"+s),o.length>0&&(n=o.html())),n}function h(t,e,o){var n=L.scrollTop,r=L.scrollLeft,i=n+L.windowHeight,s=r+L.windowWidth,a=C.none;return(t.top<n||Math.abs(t.bottom-L.windowHeight)-o<n)&&(a|=C.top),(t.top+o>i||Math.abs(t.bottom-L.windowHeight)>i)&&(a|=C.bottom),(t.left<r||t.right+e>s)&&(a|=C.left),(t.left+e>s||t.right<r)&&(a|=C.right),a}function m(t){for(var e=0;t;)t&=t-1,e++;return e}var g=t(document),w=t(window),v=t("body"),y="displayController",T="hasActiveHover",E="hasMouseEnter",b="forcedOpen",P="hasMouseMove",S="mouseOnToPopup",k="originalTitle",F="powertip",O="powertipjq",_="powertiptarget",I=".powertip",x=180/Math.PI,L={elements:null,tooltips:null,isTipOpen:!1,isFixedTipOpen:!1,isClosing:!1,tipOpenImminent:!1,activeHover:null,currentX:0,currentY:0,previousX:0,previousY:0,desyncTimeout:null,closeDelayTimeout:null,mouseTrackingActive:!1,delayInProgress:!1,windowWidth:0,windowHeight:0,scrollTop:0,scrollLeft:0},C={none:0,top:1,bottom:2,left:4,right:8};t.fn.powerTip=function(e,n){var i,l,u=this;return u.length?"string"===t.type(e)&&t.powerTip[e]?t.powerTip[e].call(u,u,n):(i=t.extend({},t.fn.powerTip.defaults,e),l=new r(i),a(),u.each(function(){var e,n=t(this),r=n.data(F),s=n.data(O),a=n.data(_);n.data(y)&&t.powerTip.destroy(n),e=n.attr("title"),r||a||s||!e||(n.data(F,e),n.data(k,e),n.removeAttr("title")),n.data(y,new o(n,i,l))}),i.manual||(t.each(i.openEvents,function(e,o){t.inArray(o,i.closeEvents)>-1?u.on(o+I,function(e){t.powerTip.toggle(this,e)}):u.on(o+I,function(e){t.powerTip.show(this,e)})}),t.each(i.closeEvents,function(e,o){t.inArray(o,i.openEvents)<0&&u.on(o+I,function(e){t.powerTip.hide(this,!s(e))})}),u.on("keydown"+I,function(e){27===e.keyCode&&t.powerTip.hide(this,!0)})),L.elements=L.elements?L.elements.add(u):u,u):u},t.fn.powerTip.defaults={fadeInTime:200,fadeOutTime:100,followMouse:!1,popupId:"powerTip",intentSensitivity:7,intentPollInterval:100,closeDelay:100,placement:"n",smartPlacement:!1,offset:10,inset:20,fromCenter:1,mouseOnToPopup:!1,manual:!1,openEvents:["mouseenter","focus"],closeEvents:["mouseleave","blur"]},t.fn.powerTip.smartPlacementLists={n:["n","ne","nw","s"],e:["e","ne","se","w","nw","sw","n","s","e"],s:["s","se","sw","n"],w:["w","nw","sw","e","ne","se","n","s","w"],nw:["nw","w","sw","n","s","se","nw"],ne:["ne","e","se","n","s","sw","ne"],sw:["sw","w","nw","s","n","ne","sw"],se:["se","e","ne","s","n","nw","se"],"nw-alt":["nw-alt","n","ne-alt","sw-alt","s","se-alt","w","e"],"ne-alt":["ne-alt","n","nw-alt","se-alt","s","sw-alt","e","w"],"sw-alt":["sw-alt","s","se-alt","nw-alt","n","ne-alt","w","e"],"se-alt":["se-alt","s","sw-alt","ne-alt","n","nw-alt","e","w"]},t.powerTip={show:function(e,o){return s(o)?(p(o),L.previousX=o.pageX,L.previousY=o.pageY,t(e).data(y).show()):t(e).first().data(y).show(!0,!0),e},reposition:function(e){return t(e).first().data(y).resetPosition(),e},hide:function(e,o){var n;return o=e?o:!0,e?n=t(e).first().data(y):L.activeHover&&(n=L.activeHover.data(y)),n&&n.hide(o),e},toggle:function(e,o){return L.activeHover&&L.activeHover.is(e)?t.powerTip.hide(e,!s(o)):t.powerTip.show(e,o),e},destroy:function(e){var o=e?t(e):L.elements;return L.elements&&0!==L.elements.length?(o.off(I).each(function(){var e=t(this),o=[k,y,T,b];e.data(k)&&(e.attr("title",e.data(k)),o.push(F)),e.removeData(o)}),L.elements=L.elements.not(o),0===L.elements.length&&(w.off(I),g.off(I),L.mouseTrackingActive=!1,L.tooltips.remove(),L.tooltips=null),e):e}},t.powerTip.showTip=t.powerTip.show,t.powerTip.closeTip=t.powerTip.hide});var prefix=function(){var t=window.getComputedStyle(document.documentElement,""),e=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1],o="WebKit|Moz|MS|O".match(new RegExp("("+e+")","i"))[1];return{dom:o,lowercase:e,css:"-"+e+"-",js:e[0].toUpperCase()+e.substr(1)}}();/*!
* FitVids 1.0.3
*
* Copyright 2013, Chris Coyier - http://css-tricks.com + Dave Rupert - http://daverupert.com
* Credit to Thierry Koblentz - http://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/
* Released under the WTFPL license - http://sam.zoy.org/wtfpl/
*
* Date: Thu Sept 01 18:00:00 2011 -0500
*/
!function(t){"use strict";t.fn.fitVids=function(e){var o={customSelector:null};if(!document.getElementById("fit-vids-style")){var n=document.createElement("div"),r=document.getElementsByTagName("base")[0]||document.getElementsByTagName("script")[0],i="&shy;<style>.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:12.5%;width:75%;height:75%;}</style>";n.className="fit-vids-style",n.id="fit-vids-style",n.style.display="none",n.innerHTML=i,r.parentNode.insertBefore(n,r)}return e&&t.extend(o,e),this.each(function(){var e=["iframe[src*='player.vimeo.com']","iframe[src*='youtube.com']","iframe[src*='youtube-nocookie.com']","iframe[src*='kickstarter.com'][src*='video.html']","object","embed"];o.customSelector&&e.push(o.customSelector);var n=t(this).find(e.join(","));n=n.not("object object"),n.each(function(){var e=t(this);if(!("embed"===this.tagName.toLowerCase()&&e.parent("object").length||e.parent(".fluid-width-video-wrapper").length)){var o="object"===this.tagName.toLowerCase()||e.attr("height")&&!isNaN(parseInt(e.attr("height"),10))?parseInt(e.attr("height"),10):e.height(),n=isNaN(parseInt(e.attr("width"),10))?e.width():parseInt(e.attr("width"),10),r=o/n;if(!e.attr("id")){var i="fitvid"+Math.floor(999999*Math.random());e.attr("id",i)}e.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*r+"%"),e.removeAttr("height").removeAttr("width")}})})}}(window.jQuery||window.Zepto),function(){var t;t=function(){function t(t){var e,o,n,r;null==t&&(t={}),this.source=null!=(e=$(t.source))?e:$("#content .raw"),this.frames=null!=(o=$(t.to))?o:$("#frames"),this.regionCls=null!=(n=t.regionCls)?n:"column",RegionFlow.prototype.init(),this.parser=new this.Parser({source:this.source}),r=this.parser.parse(),this.flowNames=r.flowNames,this.backgrounds=r.backgrounds,this.panels=r.panels,this.footnotes=r.footnotes,this.sourceLength=r.sourceLength,this.layout=new this.Layout({sourceLength:this.sourceLength,frames:this.frames,flowNames:this.flowNames,backgrounds:this.backgrounds,panels:this.panels,regionCls:this.regionCls}),this.scrolling=new this.Scrolling({frames:this.frames})}return t.prototype.panels={},t.prototype.sections={},t.prototype.parser=null,t.prototype.layout=null,t.prototype.scrolling=null,t.prototype.render=function(t,e){var o=this;return this.layout.render(function(n){return o.lastFramePosition=n,o.refresh(t),o.applyFootnotes(),$(document).triggerHandler("alongslide.ready",o.frames),o.urlToPage(),$(".inner").fitVids(),e()})},t.prototype.refresh=function(t){return this.scrolling.render(t,this.lastFramePosition)},t.prototype.urlToPage=function(){var t;return location.hash.length>0?(t=location.hash.match(new RegExp("page=([^&]*)"))[1],this.scrolling.goToPage(t)):void 0},t.prototype.applyFootnotes=function(){var t=this;return this.frames.find("a[rel=footnote]").each(function(e,o){var n;return n=$(o).attr("href").replace(/#/,""),$(o).data("powertip",t.footnotes[n].html())}),this.frames.find("a[rel=footnote]").powerTip({mouseOnToPopup:!0,fromCenter:0,placement:"se",offset:0,closeDelay:300,intentSensitivity:100})},t}(),window.Alongslide=t}.call(this),function(){Alongslide.prototype.Parser=function(){function t(t){this.source=t.source,this.preprocessSource()}return t.prototype.backgrounds=[],t.prototype.flowNames=[],t.prototype.preprocessSource=function(){return this.source.find(".alongslide:empty").text("[ALS]")},t.prototype.parse=function(){var t,e;return this.sourceLength=0,e=this.collectPanels(),t=this.collectFootnotes(),this.collectSections(),{flowNames:this.flowNames,backgrounds:this.backgrounds,panels:e,footnotes:t,sourceLength:this.sourceLength}},t.prototype.collectPanels=function(){var t;return t=this.source.find(".alongslide.show.panel"),_.object(_.map(t,function(t){var e,o,n;return e=$(t),n=e.data("alongslide-id"),o=e.clone().removeClass("show"),e.empty().removeClass("panel"),[n,o]}))},t.prototype.collectSections=function(){var t=this;return this.source.find(".alongslide.enter.section").each(function(e,o){var n,r,i,s,a;return n=$(o),i=n.data("alongslide-id"),r=".alongslide.exit.section[data-alongslide-id="+i+"]",s=n.prevAll().detach().get().reverse(),s.length&&t.buildSection(s,n),a=n.nextUntil(r).detach(),t.buildSection(a,n,i),n.remove(),t.source.find(r).remove()}),this.source.is(":empty")?void 0:this.buildSection(this.source.children())},t.prototype.buildSection=function(t,e,o){var n,r,i,s;return r=o||"sectionFlow"+this.flowNames.length,i=(null!=e?e.removeClass("alongslide").empty().removeClass("enter"):void 0)||$("<div/>"),i.attr("data-alongslide-id",r),s=i.clone().append(t),this.sourceLength+=s.text().length,document.namedFlows.get(r).addContent(s.get(0)),this.flowNames.push(r),null!=o?(n=i.clone().addClass("background frame").html("&nbsp;"),this.backgrounds.push(n)):void 0},t.prototype.collectFootnotes=function(){var t,e;return t=this.source.find(".footnotes:last-child").remove(),t.length?(e=t.find("ol li"),_.object(_.map(e,function(t){var e,o;return e=$(t),o=e.attr("id"),[o,e]}))):{}},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Alongslide.prototype.Layout=function(){function e(e){null==e&&(e={}),this.layout=t(this.layout,this),this.frames=e.frames,this.flowNames=e.flowNames,this.backgrounds=e.backgrounds,this.panels=e.panels,this.regionCls=e.regionCls,this.sourceLength=e.sourceLength}return e.prototype.WITH_HORIZONTAL_PANEL_CLASSES=["with-panel-pinned-left","with-panel-pinned-right"],e.prototype.HORIZONTAL_EDGES=["left","right"],e.prototype.VERTICAL_EDGES=["top","bottom"],e.prototype.EDGES=e.prototype.HORIZONTAL_EDGES.concat(e.prototype.VERTICAL_EDGES),e.prototype.SIZES=["one-third","half","two-thirds"],e.prototype.ALIGNMENTS=e.prototype.EDGES.concat("fullscreen"),e.prototype.IN_POINT_KEY="als-in-position",e.prototype.OUT_POINT_KEY="als-out-position",e.prototype.frameWidth=$(window).width(),e.prototype.defaultNumFrameColumns=2,e.prototype.debug=!1,e.prototype.SUPER_FRAME_LEVEL=1,e.prototype.FRAME_LEVEL=2,e.prototype.SUB_FRAME_LEVEL=3,e.prototype.render=function(t){return this.postRenderCallback=t,this.reset(),this.writeBackgrounds(),this.layout()},e.prototype.layout=function(){return this.startTime=new Date,this.log("Beginning layout"),this.currentFlowIndex=0,this.renderSection()},e.prototype.renderSection=function(){var t,e;return e=this.flowNames[this.currentFlowIndex],this.log('Laying out section "'+e+'"',this.SUPER_FRAME_LEVEL),t=this.findBackground(e),t.length&&this.setPositionOf(t,{to:this.nextFramePosition()}),this.renderFrame(e)},e.prototype.renderFrame=function(t,e,o){var n,r,i,s=this;for(e=this.findOrBuildNextFlowFrame(e);e.find("."+this.regionCls).length<this.numFrameColumns(e);){if(r=this.buildRegion(e,t),i=r.children(".three-columns").length,i&&(r.find(".section").removeClass("three-columns"),r.parent().addClass("three-columns")),null!=o&&(this.checkForOrphans(o),this.updateProgress(o),this.checkForDirectives(o)),this.flowComplete(t))return this.updateProgress(r),this.checkForDirectives(r,!0),this.checkForEmpties(r),this.currentFlowIndex++,this.currentFlowIndex!==this.flowNames.length?(n=this.findBackground(t),n.length&&this.setPositionOf(n,{until:this.lastFramePosition()}),setTimeout(function(){return s.renderSection()},1)):(this.log("Layout complete"),this.index(),this.postRenderCallback(this.lastFramePosition())),void 0;o=r}return setTimeout(function(){return s.renderFrame(t,e,o)},1)},e.prototype.checkForDirectives=function(t,e){var o=this;return t.find(".alongslide").each(function(n,r){var i,s,a,l,u,c,p,f,d;switch(i=$(r).detach(),l=i.data("alongslide-id"),s=t.parent(".frame"),!1){case!i.hasClass("show"):switch(e||(u=o.findOrBuildNextFlowFrame(s)),c=u?o.getPositionOf(u):o.nextFramePosition(),f=i.hasClass("now")?o.getPositionOf(s):c,p=o.buildPanel(l,f),o.updateProgress(p),!1){case!i.hasClass("pin"):if(o.setPositionOf(p,{until:-1}),a=_.compact([i.hasClass("now")?s:void 0,u]),_.each(a,function(t){var e,n;for(o.log("Applying with-pinned-panel styles to flow frame at "+(""+o.getPositionOf(t)),o.SUB_FRAME_LEVEL),t.addClass(o.withPinnedClass(i)),t.addClass(o.withSizedClass(i)),n=[];t.find("."+o.regionCls).length>o.numFrameColumns(t);)e=o.findOrBuildNextFlowFrame(t),o.log("Pushing last column of flow frame at "+o.getPositionOf(t)+" "+("to flow frame at "+o.getPositionOf(e)),o.SUB_FRAME_LEVEL),n.push(t.find("."+o.regionCls).last().detach().prependTo(e));return n}),i.hasClass("now"))return document.namedFlows.get(s.data("als-section-id")).reFlow();break;case!i.hasClass("fullscreen"):if(i.hasClass("now")&&o.setPositionOf(s,{to:c}),null!=u)return o.setPositionOf(u,{to:c+1})}break;case!i.hasClass("unpin"):if(p=o.findPanel(l),0!==p.length&&(o.setPositionOf(p,{until:e?o.nextFramePosition()-1:Math.max(o.getPositionOf(s),o.getPositionOf(p))}),!e))return d=o.findOrBuildNextFlowFrame(s),o.getPositionOf(d)===o.getPositionOf(p)&&(d=o.findOrBuildNextFlowFrame(d)),d.removeClass(o.withPinnedClass(p)),d.removeClass(o.withSizedClass(p))}})},e.prototype.checkForEmpties=function(t){var e,o,n=this;return e=t.clone(),e.find(".alongslide").detach(),this.isEmpty(e)&&(o=t.parent(".frame"),this.log("Removing empty column from flow frame at "+(""+this.getPositionOf(o)),this.SUB_FRAME_LEVEL),t.detach(),document.namedFlows.get(o.data("als-section-id")).resetRegions(),this.isEmpty(o)&&this.destroyFlowFrame(o)),this.frames.children(".flow").find(".frame:empty").each(function(t,e){return n.destroyFlowFrame($(e))})},e.prototype.checkForOrphans=function(t){return t.find(":last:header").detach().prependTo($("."+this.regionCls+":last"))},e.prototype.findOrBuildNextFlowFrame=function(t){var e;return e=(null!=t?t.length:void 0)?t.next(".frame"):void 0,(null!=e?e.length:void 0)||(e=this.buildFlowFrame(t)),e},e.prototype.buildFlowFrame=function(t){var e,o;return o=(null!=t?t.length:void 0)?this.getPositionOf(t)+1:this.nextFramePosition(),this.log("Building flow frame at "+o,this.FRAME_LEVEL),e=(null!=t?t.length:void 0)?null!=t?t.clone().empty():void 0:$('<div class="frame"/>'),e.appendTo(this.frames.children(".flow")),this.setPositionOf(e,{to:o})},e.prototype.destroyFlowFrame=function(t){return this.log("Destroying flow frame at "+this.getPositionOf(t),this.FRAME_LEVEL),t.detach()},e.prototype.buildRegion=function(t,e){var o;return this.log("Building column in flow frame at "+this.getPositionOf(t),this.SUB_FRAME_LEVEL),o=$("<div/>").addClass(this.regionCls),t.data("als-section-id",e),o.appendTo(t),document.namedFlows.get(e).addRegion(o.get(0)),o},e.prototype.buildPanel=function(t,e){var o,n;return n=this.panels[t].clone().show(),o=_.filter(this.ALIGNMENTS,function(t){return n.hasClass(t)}),this.log("Building "+o+' panel frame "'+t+'" at position '+e,this.FRAME_LEVEL),n.addClass("frame"),n.appendTo(this.frames.children(".panels")),this.setPositionOf(n,{to:e}),n},e.prototype.reset=function(){return this.laidOutLength=0,this.frames.find(".backgrounds").empty(),this.frames.find(".flow").empty(),this.frames.find(".panels").empty(),_.each(document.namedFlows.namedFlows,function(t){return t.resetRegions()})},e.prototype.writeBackgrounds=function(){var t,e,o,n,r;for(n=this.backgrounds,r=[],e=0,o=n.length;o>e;e++)t=n[e],r.push(this.frames.find(".backgrounds").append(t.clone()));return r},e.prototype.setPositionOf=function(t,e){var o,n;return null==e&&(e={}),n=t.parent().get(0).className,null!=e.to&&(null!=(o=this.getPositionOf(t))&&this.log("Moving "+n+" frame at "+o+" to "+(""+e.to),this.SUB_FRAME_LEVEL),t.data(this.IN_POINT_KEY,e.to)),null!=e.until&&(this.log("Dismissing "+n+' frame "'+t.data("alongslide-id")+'" '+("at "+e.until),this.SUB_FRAME_LEVEL),t.data(this.OUT_POINT_KEY,e.until)),t},e.prototype.getPositionOf=function(t){return t.data(this.IN_POINT_KEY)},e.prototype.nextFramePosition=function(){var t;return t=this.lastFramePosition(),null!=t?t+1:0},e.prototype.lastFramePosition=function(){var t,e,o=this;return e=this.frames.children(".flow, .panels").find(".frame"),t=_(e).map(function(t){return o.getPositionOf($(t))}),t.length?Math.max.apply(Math,t):void 0},e.prototype.numFrameColumns=function(t){return t.hasClass("three-columns")?3:this.isWithHorizontalPanel(t)?1:this.defaultNumFrameColumns},e.prototype.index=function(){var t=this;return this.panelIndex={},this.frames.children(".panels").find(".panel.frame").each(function(e,o){var n,r,i,s,a,l;for(n=$(o).data(t.OUT_POINT_KEY)||$(o).data(t.IN_POINT_KEY),-1===n&&(n=t.lastFramePosition()),l=[],r=s=a=$(o).data(t.IN_POINT_KEY);n>=a?n>=s:s>=n;r=n>=a?++s:--s)null==(i=t.panelIndex)[r]&&(i[r]=[]),l.push(t.panelIndex[r].push(o));return l})},e.prototype.isWithHorizontalPanel=function(t){var e,o,n,r;for(r=this.WITH_HORIZONTAL_PANEL_CLASSES,o=0,n=r.length;n>o;o++)if(e=r[o],t.hasClass(e))return!0},e.prototype.findBackground=function(t){return this.frames.children(".backgrounds").find(".background.frame[data-alongslide-id="+t+"]")},e.prototype.findPanel=function(t){return this.frames.children(".panels").find(".panel.frame[data-alongslide-id="+t+"]")},e.prototype.horizontalPanelAt=function(t){var e,o,n,r,i;for(i=this.panelIndex[t]||[],n=0,r=i.length;r>n;n++)return o=i[n],e=_.first(_.filter(this.HORIZONTAL_EDGES,function(t){return $(o).hasClass(t)})),null!=e;return!1},e.prototype.withPinnedClass=function(t){var e;return e=_.first(_.filter(this.EDGES,function(e){return t.hasClass(e)})),"with-panel-pinned-"+e},e.prototype.withSizedClass=function(t){var e;return e=_.first(_.filter(this.SIZES,function(e){return t.hasClass(e)})),null==e&&(e="half"),"with-panel-sized-"+e},e.prototype.framePartialWidth=function(t){var e,o,n;return this.isWithHorizontalPanel(t)?(e=t.find("."+this.regionCls),o=e.position().left,n=t.width()-e.width()-o,(2*Math.min(o,n)+e.width())/t.width()):void 0},e.prototype.panelAlignment=function(t){return _.first(_.filter(this.ALIGNMENTS,function(e){return t.hasClass(e)}))},e.prototype.flowComplete=function(t){return!document.namedFlows.get(t).overset},e.prototype.isEmpty=function(t){return""===$.trim(t.children().html())},e.prototype.updateProgress=function(t){return this.laidOutLength+=t.text().length,$(document).triggerHandler("alongslide.progress",this.laidOutLength/this.sourceLength)},e.prototype.log=function(t,e){var o;return null==e&&(e=0),o=_(e).times(function(){return". "}).join(""),"undefined"!=typeof console&&null!==console&&this.debug?console.log(""+o+t+" (elapsed: "+(new Date-this.startTime).valueOf()+"ms)"):void 0},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Alongslide.prototype.Scrolling=function(){function e(e){null==e&&(e={}),this.events=t(this.events,this),this.frames=e.frames,this.skrollr=skrollr.init({emitEvents:!0,horizontal:!0,edgeStrategy:"set",render:this.snap}),this.arrowKeys(),this.events(),this.skrollr.isMobile()||(this.throttleScrollEvents(),this.monitorScroll())}return e.prototype.TRANSITIONS={"in":[-1,0],out:[0,1]},e.prototype.FLIP_THRESHOLD=.04,e.prototype.WAIT_BEFORE_RESET_MS=250,e.prototype.SLIDE_DURATION_MS=400,e.prototype.FORCE_SLIDE_DURATION_MS=100,e.prototype.NUM_WHEEL_HISTORY_EVENTS=10,e.prototype.MAGNITUDE_THRESHOLD=2,e.prototype.currentPosition=0,e.prototype.wheelHistory=[],e.prototype.lastAverageMagnitude=0,e.prototype.ignoreScroll=!1,e.prototype.lastRequestedPosition=0,e.prototype.render=function(t,e){return this.frameAspect=t,this.applyTransitions(e),this.skrollr.refresh()},e.prototype.events=function(){return this.frames.on("skrollrBefore",function(t){return t.target}),this.frames.on("skrollrBetween",function(t){return t.target}),this.frames.on("skrollrAfter",function(t){return t.target})},e.prototype.applyTransitions=function(t){var e=this;return this.frames.find(".frame").each(function(o,n){var r,i;return r=$(n),i={"in":parseInt(r.data("als-in-position")),out:parseInt(r.data("als-out-position"))},i["in"]===t||-1===i.out?i.out=null:i.out||(i.out=i["in"]),e.applyTransition(r,i,t)})},e.prototype.applyTransition=function(t,e,o){var n,r,i,s,a,l,u,c,p,f,d,h,m,g,w,v;null==e&&(e={}),n=2,e=this.transitionOptions(t,e),c=t.parent().hasClass("flow")?this.frameAspect.left:0,s=alongslide.layout.framePartialWidth(t),w=this.TRANSITIONS,v=[];for(h in w)i=w[h],null!=e[h]?v.push(function(){var w,v,y;for(y=[],w=0,v=i.length;v>w;w++)r=i[w],l=null!=s?_.map([s,1],function(t,o){var i,s;return i=r*(parseInt(o)+1),s=e[h]+i,alongslide.layout.horizontalPanelAt(s)||(t=1),[{magnitude:i,scale:t*n},{magnitude:.99*i,scale:t}]}):"fade"===e.transition[h]&&0!==r?[{magnitude:.99*r,scale:0},{magnitude:r,scale:1}]:[{magnitude:r,scale:1}],y.push(function(){var n,i,s,w;for(s=_.flatten(l),w=[],n=0,i=s.length;i>n;n++)a=s[n],u=a.magnitude,f=a.scale,p=e[h]+u,p>o?w.push(void 0):(d={},m=(c-r)*f,g=Math.round(m*$(window).width()),d[""+prefix.css+"transform"]="translate("+g+"px, 0) translateZ(0)",d.opacity="fade"===e.transition[h]?1-Math.abs(r):1,w.push(t.attr("data-"+Math.round(100*p)+"p",_.map(d,function(t,e){return""+e+": "+t}).join("; "))));return w}());return y}()):v.push(void 0);return v},e.prototype.transitionOptions=function(t,e){var o;return null==e&&(e={}),o=t.get(0).className,e.transition=_.object(_.map(this.TRANSITIONS,function(t,e){var n,r;return r=o.match(new RegExp("(\\S+)-"+e)),n=r?r[1]:"slide",[e,n]})),e},e.prototype.throttleScrollEvents=function(){var t=this;return $(window).on("wheel mousewheel DOMMouseScroll MozMousePixelScroll",function(e){var o,n,r;return n=e.originalEvent.deltaX||e.originalEvent.wheelDeltaX||0,r=e.originalEvent.deltaY||e.originalEvent.wheelDeltaY||0,o=t.updateWheelHistory(n),t.ignoreScroll&&(o>t.lastAverageMagnitude*t.MAGNITUDE_THRESHOLD?t.ignoreScroll=!1:Math.abs(n)>Math.abs(r)&&e.preventDefault()),t.lastAverageMagnitude=o})},e.prototype.monitorScroll=function(){var t,e=this;return t=function(){return e.lastAverageMagnitude=e.updateWheelHistory(0)},_(this.NUM_WHEEL_HISTORY_EVENTS).times(function(){return t()}),setInterval(t,5)},e.prototype.updateWheelHistory=function(t){var e,o;for(this.wheelHistory.unshift(t);this.wheelHistory.length>this.NUM_WHEEL_HISTORY_EVENTS;)this.wheelHistory.pop();return o=_.reduce(this.wheelHistory,function(t,e){return t+e},0),e=o/this.wheelHistory.length,Math.abs(e)},e.prototype.scrollToPosition=function(t,e){var o,n,r,i,s,a,l=this;return null==e&&(e={}),a=this.skrollr||e.skrollr,clearTimeout(this.resetTimeout),n=t-this.lastRequestedPosition,o=t-this.currentPosition,i=n>0?o>this.FLIP_THRESHOLD?Math.ceil(t):void 0:0>n?o<-this.FLIP_THRESHOLD?Math.floor(t):void 0:void 0,null==i&&(i=this.currentPosition),i=Math.max(0,i),"undefined"!=typeof alongslide&&null!==alongslide&&(i=Math.min(i,"undefined"!=typeof alongslide&&null!==alongslide?alongslide.layout.lastFramePosition():void 0)),i!==this.currentPosition?(s=i*$(window).width(),r=this.SLIDE_DURATION_MS,alongslide.layout.horizontalPanelAt(i)&&alongslide.layout.horizontalPanelAt(this.currentPosition)&&(r/=2),this.currentPosition=i):t!==this.currentPosition?this.resetTimeout=setTimeout(function(){return l.scrollToPosition(l.currentPosition,{force:!0})},this.WAIT_BEFORE_RESET_MS):e.force&&i*$(window).width()!==a.getScrollPosition()&&(s=this.currentPosition*$(window).width(),r=this.FORCE_SLIDE_DURATION_MS),null!=s&&(a.isMobile()||"keys"===e.scrollMethod||(this.ignoreScroll=!0),a.animateTo(s,{duration:r,easing:"sqrt"})),this.lastRequestedPosition=t},e.prototype.snap=function(t){var e,o;if(!(this.isAnimatingTo()||t.curTop>t.maxTop))return e=t.curTop/$(window).width(),null!=(o=window.alongslide)?o.scrolling.scrollToPosition(e,{skrollr:this,force:this.isMobile()}):void 0},e.prototype.arrowKeys=function(){var t=this;return $(document).keydown(function(e){var o;switch(e.keyCode){case 37:t.scrollToPosition(t.currentPosition-1,{scrollMethod:"keys"});break;case 39:t.scrollToPosition(t.currentPosition+1,{scrollMethod:"keys"});break;default:o=!0}return null!=o})},e}()}.call(this),function(){}.call(this),function(){window.Styles=function(){function t(){}return t.prototype.urls=[],t.prototype.loadLater=function(t){var e=this;return $(t).filter("link").each(function(t,o){return e.urls.push($(o).attr("href"))})},t.prototype.doLoad=function(t){var e;return e=$('<style type="text/css"/>').appendTo("body"),$.each(this.urls,function(t,o){return $.ajax(o,{async:!1,success:function(t){return e.append(t)}})}),t()},t.prototype.formatPercentages=function(t,e){var o,n=this;return o=_.map(e,function(t,e){return""+e+": "+n.formatPercentageValue(t)}).join(";"),""+t+" { "+o+" }"},t.prototype.formatPercentageValues=function(t){var e=this;return _.object(_(t).map(function(t,o){return[o,e.formatPercentageValue(t)]}))},t.prototype.formatPercentageValue=function(t){return""+100*t+"%"},t.prototype.formatPixels=function(t,e){var o;return o=_.map(e,function(t,e){return""+e+": "+t+"px"}).join(";"),""+t+" { "+o+" }"},t.prototype.write=function(t,e){return $("style#"+t).remove(),$('<style type="text/css" id="'+t+'"/>').append(e).appendTo("body")},t}()}.call(this),function(){window.FixedAspect=function(){function t(){}return t.prototype.fitFrame=function(t,e){var o,n,r,i,s,a,l,u,c,p,f;return null==e&&(e=0),o=1.6,n="#frames > .flow > .frame",r={width:1,height:1,left:0,top:0},f=$(window).width()/$(window).height(),f>o?(r.width=o/f,r.left=(1-r.width)/2):(r.height=f/o,r.top=(1-r.height)/2),s=e/$(window).height(),r.top<s&&(r.top=s,u=(1-r.top)/r.height,r.height*=u,r.width*=u,r.left=(1-r.width)/2),i=r.width*$(window).width(),c=t/i,c>1&&(r.height*=c,r.width*=c),Styles.prototype.write("debug-grid-aspect",Styles.prototype.formatPercentages("#als-debug-grid",r)),Styles.prototype.write("frame-aspect",Styles.prototype.formatPercentages(n,_(r).omit("left"))),a=($(window).width()-$("#markdown-source").outerWidth())/$(window).width()/2,Styles.prototype.write("markdown-source-frame-aspect",Styles.prototype.formatPercentages("#markdown-source",{left:a})),l=Math.max(1,1/c),p={"font-size":parseInt($("#content-display").css("font-size"))*l,"line-height":parseInt($("#content-display").css("line-height"))*l},Styles.prototype.write("frame-text",Styles.prototype.formatPixels("#frames",p)),r},t.prototype.fitPanels=function(t){var e=this;return $("#frames > .panels > .panel").each(function(o,n){var r,i,s,a,l,u,c;switch(i=$(n),r=i.find("> .contents"),s=Alongslide.prototype.Layout.prototype.panelAlignment(i),u=r.data("innerFrame"),null==u&&(u=e.innerFrame(i),r.data("innerFrame",u)),c={width:1,height:1},s){case"left":c.width=t.left+(u.left+u.width)*t.width;break;case"right":c.width=t.left+(1-u.left)*t.width;break;case"top":c.height=t.top+(u.top+u.height)*t.height;break;case"bottom":l=1-t.top-t.height,c.height=l+(1-u.top)*t.height}switch(a={left:(t.left+u.left*t.width)/c.width,top:(t.top+u.top*t.height)/c.height,width:u.width*t.width/c.width,height:u.height*t.height/c.height},s){case"right":c["margin-left"]=t.left+u.left*t.width,a.left=0;break;case"bottom":c.bottom=0,a.top=0}return i.css(Styles.prototype.formatPercentageValues(c)),r.css(Styles.prototype.formatPercentageValues(a))})},t.prototype.innerFrame=function(t){var e;return e=t.find("> .contents"),{left:parseInt(e.css("left"))/t.width(),top:parseInt(e.css("top"))/t.height(),width:e.width()/t.width(),height:e.height()/t.height()}},t}()}.call(this),function(){window.Loader=function(){function t(){}var e;return t.prototype.INITIAL_PROGRESS=.1,e=.9,t.prototype.show=function(t){return this.updateProgress(t?0:this.INITIAL_PROGRESS),this.loader().show().css({opacity:t?e:1})},t.prototype.hide=function(){var t=this;return this.updateProgress(1),this.loader().css({opacity:0}),setTimeout(function(){return t.loader().hide()},200)},t.prototype.updateProgress=function(t){return this.progress().css({width:""+100*t+"%"})},t.prototype.updateSecondaryProgress=function(t){return this.updateProgress(this.INITIAL_PROGRESS+(1-this.INITIAL_PROGRESS)*t)},t.prototype.loader=function(){return this.loaderEl||(this.loaderEl=$("#loading"))},t.prototype.progress=function(){return this.loader().find(".progress")},t}()}.call(this),function(){var t,e,o,n,r,i,s,a,l;r=["screen and (min-device-width : 768px) and (max-device-width : 1024px) and (orientation : portrait)","screen and (max-width: 568px)"],t=["screen and (min-width:569px)"],n=980,o=35,e=250,$(document).on("webfonts.loaded",function(){return Styles.prototype.doLoad(function(){return console.log("Loaded styles."),s(),$("style.custom").remove().appendTo("body"),_.each(r,function(t){return enquire.register(t,{match:l,unmatch:function(){return location.reload()}})}),_.each(t,function(){return enquire.register("screen and (min-width:569px)",{match:a,unmatch:function(){return location.reload()}})})})}),l=function(){var t;return $("body").addClass("readability"),t=$("#source").html(),$("#content-display").html(t)},a=function(){return window.alongslide=new Alongslide({source:"#content .raw",to:"#frames",regionCls:"column"}),i()},s=function(){var t;return t=$("#source").find("h1,h2,h3,h4,h5,h6,blockquote,p,a,img"),t=_.map(t,function(t){return t.outerHTML}),t=_.reduce(t,function(t,e){return t.concat(e)}),$("#source").html(t)},i=function(t){var e;return Loader.prototype.show(t),e=FixedAspect.prototype.fitFrame(n,o),t?(window.alongslide.refresh(e),FixedAspect.prototype.fitPanels(e)):window.alongslide.render(e,function(){return FixedAspect.prototype.fitPanels(e),Loader.prototype.hide()})},$(window).resize(function(){return i(!0),clearTimeout(window.renderTimeout),window.renderTimeout=setTimeout(function(){return i()},e)}),window.grid_mode="project",$(document).on("alongslide.progress",function(t,e){return Loader.prototype.updateSecondaryProgress(e)}),$(function(){return $("#frames").click(function(){return $("#markdown-source").removeClass("on")}),$("#markdown-source a.close").click(function(){return $("#markdown-source").removeClass("on"),!1})}),$(document).on("alongslide.ready",function(t,e){return $(e).find(".panel[data-alongslide-id=footer] a").click(function(){return $("#markdown-source").addClass("on"),!1})})}.call(this);